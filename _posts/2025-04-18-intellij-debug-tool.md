---
layout: post 
title: "실수해도 괜찮아: 인텔리제이 디버깅" 
date: 2025-04-18 17:00:00 -0700
---

코드를 작성하다 보면 System.out.println()으로 디버깅하는 경우가 많다. 나도 그동안 습관적으로 콘솔 로그로 디버깅해왔다. 하지만 복잡한 프로젝트에서 로그만으로는 한계가 분명했다. 이제 더 이상은 안 되겠다 싶어 제대로 된 디버깅 도구에 익숙해지기로 결심했다. 인텔리제이의 디버깅 기능들을 활용하는 방법을 정리해봤다.

## 기본 디버깅 기능

### Breakpoint
**단축키: Ctrl+F8**

브레이크 포인트는 프로그램이 실행 중에 멈춰주는 지점이다. 원래 프로그램은 안 멈추고 그냥 쭉 실행되지만, 브레이크 포인트를 설정하면 그 지점에서 일시정지된다. 코드 라인 번호 옆 여백을 클릭하면 빨간 점이 생기는데, 그게 바로 브레이크 포인트다.

### Debug
**단축키: Shift+F9**

디버그 모드로 프로그램을 실행하는 방법이다. 일반 실행(Shift+F10)과 다르게 브레이크 포인트에서 멈추고 변수 값을 확인할 수 있다.

## 디버그 창 구성 요소

디버그 모드가 실행되면 화면 하단에 디버그 창이 나타난다. 여러 패널로 구성되어 있는데, 각각 다른 정보를 보여준다.

### Frames
브레이크 포인트까지 실행된 메소드 호출 스택들이 여기 표시된다. 프로그램이 어떤 경로를 거쳐 현재 지점에 도달했는지 보여준다. 스택 위에서부터 아래로 호출 순서대로 나열된다. 각 프레임을 클릭하면 해당 메소드의 실행 상태로 이동할 수 있다.

### Variables
현재 스코프에 있는 지역 변수들의 값을 보여준다. 디버깅할 때 가장 많이 들여다보는 곳이다. 코드가 실행되면서 점점 값이 많아진다. 객체 타입 변수는 옆 화살표를 클릭해 내부 속성까지 확인할 수 있다.

### Console
프로그램의 표준 출력과 오류 메시지가 여기 표시된다. System.out.println()이나 로깅 출력을 확인할 수 있다. 디버깅 중에도 출력을 보면서 코드 실행 상태를 파악하는 데 도움이 된다.

### Threads
멀티스레드 애플리케이션에서 현재 실행 중인 모든 스레드 목록을 보여준다. 각 스레드의 상태(실행 중, 대기 중 등)와 스택 트레이스를 확인할 수 있다. 스레드 간 전환도 가능하다.

## 디버그 제어 버튼들

### Resume (F9)
다음 브레이크 포인트까지 코드를 계속 실행한다. 현재 지점에서 더 이상 볼 게 없을 때 사용한다.

### Step Over (F8)
현재 라인을 실행하고 다음 줄로 넘어간다. 메소드 호출이 있어도 그 내부로 들어가지 않고 결과만 받아온다. 반복문에서 Step Over를 하면 한 번의 반복을 실행하고 다음으로 넘어간다.

### Step Into (F7)
현재 라인에 메소드 호출이 있으면 그 메소드 내부로 들어가서 디버깅한다. 흐름을 따라 안으로 들어가는 개념이다.

### Step Out (Shift+F8)
현재 메소드의 실행을 완료하고 호출한 지점으로 돌아간다. Step Into의 반대 개념으로, 스택을 나온다. 메소드 내부를 충분히 확인했으면 이걸로 빠져나오면 된다.

### Drop Frame
실행하지 않고 스택을 나오는 기능이다. 현재 메소드 호출을 취소하고 호출 이전 상태로 되돌린다. 메소드를 처음부터 다시 디버깅하고 싶을 때 유용하다.

### Run to Cursor (Alt+F9)
브레이크 포인트를 설정하지 않고도 커서가 있는 위치까지 코드를 실행한다. 임시로 특정 지점까지 실행하고 싶을 때 유용하다.

## 고급 디버깅 기능

### Conditional Breakpoints
브레이크 포인트에 우클릭하면 조건을 설정할 수 있다.

```java
for (int i = 0; i < 10000; i++) {
    if (users.get(i).getStatus() == Status.INACTIVE) {
        // 이 부분을 디버깅하고 싶다
    }
}
```

이런 코드가 있을 때, 특정 조건(예: i == 5000 또는 users.get(i).getName().equals("John"))일 때만 멈추게 할 수 있다. 수천 번의 Step Over를 누르지 않아도 된다!

또한 브레이크포인트가 '히트'된 횟수를 지정할 수도 있다. 예를 들어 '5번째 히트부터 멈춤'으로 설정하면 처음 4번은 무시하고 5번째부터 멈춘다.

### Evaluate Expression (Alt+F8)
브레이크 포인트에 걸린 상태에서 코드를 자유롭게 실행해볼 수 있다. 단순히 값을 출력하는 것 뿐만 아니라, 메소드 호출, 객체 생성, 심지어 다른 클래스의 정적 메소드까지 실행 가능하다.

#### 구체적인 활용 예시:

**스트림 처리 디버깅**
```java
// 리스트에서 특정 조건에 맞는 항목만 필터링해서 확인
orders.stream()
    .filter(order -> order.getStatus() == OrderStatus.COMPLETED)
    .collect(Collectors.toList())
```
이렇게 하면 현재 orders 컬렉션에서 완료된 주문만 필터링한 결과를 즉시 확인할 수 있다. 전체 컬렉션에서 원하는 항목만 빠르게 추출해볼 수 있어 유용하다.

**객체 상태 변경 테스트**
```java
// 주문 상태 변경 테스트
order.setStatus(OrderStatus.SHIPPED);
order.updateShippingInfo(new ShippingInfo("ABC123"));
order.isReadyForDelivery() // 배송 준비 상태 확인
```
객체의 상태를 임시로 변경한 후 메소드 호출 결과를 확인할 수 있다. 이 변경은 실제 프로그램 실행에 영향을 주지 않으면서 다양한 상황을 테스트할 수 있다.

**JSON 변환으로 객체 구조 확인**
```java
// 객체를 JSON으로 변환해 전체 구조 파악
ObjectMapper mapper = new ObjectMapper();
mapper.writeValueAsString(complexObject)
```
복잡한 객체 구조를 한눈에 파악하기 어려울 때 JSON으로 변환해 전체 모습을 확인할 수 있다. Jackson 라이브러리를 사용중이라면 바로 ObjectMapper 객체를 생성해서 사용할 수 있다.

**예외 상황 시뮬레이션**
```java
// 예외가 발생할 수 있는 상황 테스트
try {
    service.processData(null);
} catch (Exception e) {
    e.getMessage()
}
```
null 값이나 경계값을 입력해 예외 처리가 제대로 작동하는지 확인할 수 있다.

### Watch
변수나 표현식의 값을 코드 실행 과정에서 지속적으로 모니터링할 수 있다. 디버깅 창 우측 상단의 '+' 버튼을 클릭하고 감시할 표현식을 입력하면 된다.

#### 실제 프로젝트 상황별 활용법:

**반복문에서 값 변화 추적**
```java
i                            // 현재 반복 인덱스
array[i]                     // 현재 처리 중인 배열 요소
sum                          // 누적값 모니터링
array.length - i             // 남은 반복 횟수
```
반복문에서 이런 표현식을 추가해두면 각 반복마다 어떤 요소를 처리하고 있는지, 누적값은 어떻게 변하는지 한눈에 볼 수 있다.

**객체 상태 변화 추적**
```java
user.getStatus()             // 사용자 상태 
cart.getItems().size()       // 장바구니 아이템 수
order.getTotalPrice()        // 주문 총액
```
메소드 호출을 통한 객체의 상태 변화를 계속 모니터링할 수 있다. 특히 여러 메소드를 거치며 객체 상태가 변경될 때 유용하다.

**조건식 모니터링**
```java
users.stream().anyMatch(u -> u.getRole() == Role.ADMIN)  // 관리자가 있는지
transactions.stream().filter(t -> t.getAmount() < 0).count()  // 음수 금액 거래 수
```
복잡한 조건식을 감시하여 특정 조건이 충족되는 시점을 정확히 파악할 수 있다.

## 디버깅의 실제 활용

인텔리제이 디버깅 기능을 처음 접하면 어색할 수 있다. 익숙해지는 데 시간이 걸리지만, 디버깅의 가치는 분명하다.

디버깅은 버그 수정뿐만 아니라 코드 학습에도 큰 도움이 된다. 특히 다음과 같은 상황에서 유용하다:

- **새로운 코드베이스 이해하기** - 메소드 호출 흐름을 따라가면서 전체 구조를 파악할 수 있다. 라이브러리나 프레임워크의 작동 방식을 이해하는 데 특히 좋다.
- **알고리즘 학습** - 복잡한 알고리즘을 한 줄씩 실행하면서 변수 변화를 관찰하면 동작 원리를 더 깊이 이해할 수 있다.
- **코드 리뷰** - 다른 개발자의 코드를 리뷰할 때 디버거를 통해 실행 흐름을 따라가보면 의도를 더 정확히 파악할 수 있다.

System.out.println()으로 디버깅하는 방식은 임시방편일 뿐, 실제 개발에서는 디버거를 활용하는 것이 훨씬 효과적이다. 코드 실행을 통제할 수 있고, 변수 값을 실시간으로 확인할 수 있기 때문이다.

디버깅을 통해 코드를 더 깊이 이해하면 결국 더 나은 코드를 작성할 수 있게 된다. 단순히 동작하는 코드가 아니라, 왜 그렇게 동작하는지 이해하는 개발자가 되는 것이 중요하다.
