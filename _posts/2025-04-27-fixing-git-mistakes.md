---
layout: post
title: "실수해도 괜찮아: Git 지난 커밋 수정 가이드"
date: 2025-04-27 10:30:00 -0700
---

Git을 사용하다 보면 이미 완료한 커밋에 단순한 오타가 있거나 메시지를 수정하고 싶어지는 경우가 생긴다. Git은 이미 지난 커밋도 수정할 수 있는 기능을 제공한다. 과거의 여러 커밋을 정리하고 수정하는 방법을 알아보자.

## 이전 커밋 수정하기: Interactive Rebase

`--amend`는 가장 최근 커밋만 수정할 수 있다. 더 이전 커밋을 수정하려면 대화형 리베이스(interactive rebase)를 사용해야 한다.

```bash
# 최근 3개 커밋을 수정하기 위한 대화형 리베이스 시작
git rebase -i HEAD~3
```

이 명령을 실행하면 텍스트 에디터가 열리고 지정한 범위의 커밋 목록이 표시된다:

```
pick f7f3f6d 첫 번째 커밋 메시지
pick 310154e 두 번째 커밋 메시지
pick a5f4a0d 세 번째 커밋 메시지
```

여기서 수정하려는 커밋 앞의 pick을 다음 중 하나로 변경한다:

- edit 또는 e: 커밋 내용과 메시지를 수정
- reword 또는 r: 커밋 메시지만 수정
- squash 또는 s: 이전 커밋과 합치기
- fixup 또는 f: 이전 커밋과 합치면서 메시지는 버리기

예를 들어, 두 번째 커밋을 수정하려면:

```
pick f7f3f6d 첫 번째 커밋 메시지
edit 310154e 두 번째 커밋 메시지
pick a5f4a0d 세 번째 커밋 메시지
```

저장하고 종료하면 Git은 edit으로 표시한 커밋에서 일시 중지된다. 이때 다음과 같이 수정할 수 있다:

```bash
# 파일 변경
git add 수정된_파일.txt

# 커밋 수정 완료
git commit --amend

# 리베이스 계속 진행
git rebase --continue
```

## 커밋 합치기: Squash와 Fixup

여러 개의 작은 커밋을 하나로 합치고 싶을 때는 대화형 리베이스에서 squash나 fixup 옵션을 사용한다.

```
pick f7f3f6d 중요한 기능 추가
squash 310154e 오타 수정
squash a5f4a0d 사소한 버그 수정
```

이렇게 하면 세 개의 커밋이 하나로 합쳐지고, 합쳐진 커밋 메시지를 편집할 수 있는 에디터가 열린다.

## 이미 푸시된 커밋 수정하기

이미 원격 저장소에 푸시한 커밋을 수정한 경우, 강제 푸시를 사용해야 한다:

```bash
git push --force
```

하지만 이 방법은 협업 환경에서 문제를 일으킬 수 있으므로 주의해야 한다. 조금 더 안전한 방법은:

```bash
git push --force-with-lease
```

이 명령은 다른 사람이 해당 브랜치에 새 커밋을 푸시하지 않은 경우에만 강제 푸시를 허용한다.

## 실용적인 가이드라인

1. 수정 필요성 판단: 단순 오타일 경우 과연 수정이 필요한지 먼저 고민하자. 협업 환경에서는 때로 그냥 넘어가는 것이 더 효율적일 수 있다.
2. 공유된 커밋: 이미 다른 사람과 공유된 커밋은 수정보다는 새 커밋을 추가하는 것이 안전하다.
3. 브랜치 활용: 과거 커밋 수정 전에는 별도 브랜치를 만들어 시도해보는 것이 좋다.
4. 강제 푸시 주의: git push --force는 개인 브랜치에서만 조심스럽게 사용하자.

## 정리

Git의 이전 커밋 수정 기능은 완벽주의자를 위한 도구일 수 있다. 단순한 오타 수정이나 메시지 변경을 위해 과거 이력을 수정하는 것이 항상 필요한 것은 아니지만, 때로는 깔끔한 커밋 이력 관리를 위해 유용하게 사용할 수 있다.

결국, 이런 도구들의 존재를 알고 있다면 필요한 순간에 활용할 수 있다는 안도감을 준다. 단, 항상 기억하자 - 공유된 이력을 수정하는 것은 신중하게, 개인 작업 공간에서의 수정은 자유롭게. 이것이 Git의 과거 수정 도구를 현명하게 사용하는 방법이다.
