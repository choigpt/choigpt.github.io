---
layout: post
title: "실수해도 괜찮아: Git 커밋 수정 가이드"
date: 2025-04-17 15:00:00
---

Git을 사용하다 보면 커밋을 한 후에 "아, 이걸 빼먹었네" 혹은 "커밋 메시지가 이상한데..."라는 생각이 들 때가 있다. 이런 상황을 위한 Git의 핵심 명령어들을 실용적인 관점에서 알아보자.

## 최근 커밋 수정하기: git commit --amend

방금 커밋한 내용을 수정하고 싶을 때 가장 간단한 방법이다.

```bash
# 커밋 메시지만 변경하기
git commit --amend -m "새로운 커밋 메시지"

# 파일 변경사항 추가하기
git add 빼먹은_파일.txt
git commit --amend
```

이 명령은 마지막 커밋을 새 커밋으로 대체한다. 단, 이미 원격 저장소에 푸시한 커밋은 수정하지 않는 것이 좋다.

## 커밋 되돌리기: git reset의 세 가지 방법

특정 커밋으로 되돌아가고 싶을 때 사용한다.

```bash
# 커밋은 취소하고 변경사항은 스테이징 영역에 유지
git reset --soft HEAD~1

# 커밋 취소 + 스테이징도 취소 (파일 내용은 유지)
git reset HEAD~1

# 커밋 취소 + 스테이징 취소 + 파일 내용도 모두 되돌리기
git reset --hard HEAD~1
```

`--soft`: 코드는 그대로 두고 커밋만 취소하고 싶을 때
`--mixed`: 기본값. 커밋을 취소하고 변경사항을 다시 스테이징할 수 있게 할 때
`--hard`: 완전히 이전 상태로 돌아가고 싶을 때

## 안전하게 커밋 취소하기: git revert

이미 원격 저장소에 푸시한 커밋을 취소하려면 `git revert`가 더 안전하다.

```bash
git revert 커밋해시
```

이 명령은 지정한 커밋의 변경사항을 취소하는 새로운 커밋을 생성한다. 이력이 보존되어 협업 환경에서 문제가 생기지 않는다.

## 실수로 삭제한 커밋 복구하기: git reflog

`git reset --hard`로 커밋을 삭제했다면 `git reflog`로 복구할 수 있다.

```bash
# HEAD의 이동 이력 보기
git reflog

# 특정 시점으로 되돌아가기
git reset --hard HEAD@{2}  # 2번 전 상태로 복구
```

Git은 로컬에서 HEAD가 가리켰던 모든 커밋의 이력을 일정 기간 동안 보관한다.

## 실용적인 가이드라인

1. **로컬 전용**: `--amend`와 `reset`은 아직 원격에 푸시하지 않은 커밋에만 사용하자.

2. **공유된 커밋**: 이미 다른 사람과 공유된 커밋은 `revert`를 사용하자.

3. **브랜치 활용**: 중요한 변경 전에는 새 브랜치를 생성해서 안전하게 작업하자.

4. **강제 푸시 주의**: `git push --force`는 개인 브랜치에서만 조심스럽게 사용하자.

5. **안전망**: 어떤 실수를 해도 `git reflog`로 대부분 복구할 수 있다는 것을 기억하자.

## 정리

Git의 커밋 수정 도구들은 매우 유연하고 강력하다. 이 도구들을 적절히 활용하면 깔끔한 커밋 이력을 유지하면서도 실수를 쉽게 만회할 수 있다. 가장 중요한 것은 이미 공유된 이력과 아직 공유되지 않은 이력을 다르게 접근해야 한다는 것이다.

결국, Git의 진정한 강점은 실수를 두려워하지 않고 자유롭게 코드를 작성할 수 있게 해준다는 점이다. 어떤 실수를 해도 돌아갈 길이 있다는 것을 알면, 더 자신감 있게 프로그래밍에 집중할 수 있다. 이것이 Git이 주는 가장 큰 선물이 아닐까.
